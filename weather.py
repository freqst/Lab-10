import requests
from num2words import num2words as n2w
import random


url = "https://wttr.in/Saint-Petersburg?format=2"
response = requests.get(url)

if response.status_code == 200:
    weather = response.text
weather = weather.split()

emojis = [
    {'id' : 0, 'mood' : "‚ú®", 'text' : "–ö–∞–∫–æ–µ –∑–≤–µ–∑–¥–Ω–æ–µ –Ω–µ–±–æ!", 'rec' : '1'},
    {'id' : 1, 'mood' : "‚òÅÔ∏è", 'text' : "–û–±–ª–∞–∫–∞ –±–µ–ª–æ–≥—Ä–∏–≤—ã–µ –ª–æ—à–∞–¥–∫–∏. –ï—Å–ª–∏ –∫—Ä–∞—Ç–∫–æ, —Ç–æ –æ–±–ª–∞—á–Ω–æ", 'rec' : '1'},
    {'id' : 2, 'mood' : "üå´", 'text' : "–°–¥—É–≤–∞–µ—Ç. –í–µ—Ç—Ä–µ–Ω–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ", 'rec' : '0'},
    {'id' : 3,'mood' : "üåß", 'text' : "–û–±–ª–∞–∫–∞ —Å –∫–∞–ø–ª—è–º", 'rec' : '0'},
    {'id' : 4, 'mood' : "üåß", 'text' : "–û–±–ª–∞–∫–∞ —Å –∫–∞–ø–ª—è–º", 'rec' : '0'},
    {'id' : 5, 'mood' : "‚ùÑÔ∏è", 'text' : "–°–Ω–µ–∂–∏–Ω–∫–∞.  –°–Ω–µ–≥. –°–Ω–µ–≥–æ–ø–∞–¥.", 'rec' : '1'},
    {'id' : 6, 'mood' : "‚ùÑÔ∏è", 'text' : "–°–Ω–µ–∂–∏–Ω–∫–∞.  –°–Ω–µ–≥. –°–Ω–µ–≥–æ–ø–∞–¥.", 'rec' : '1'},
    {'id' : 7, 'mood' : "üå¶", 'text' : "–°–æ–ª–Ω—Ü–µ –∏ –æ–±–ª–∞–∫–∞ —Å –∫–∞–ø–ª—è–º–∏", 'rec' : '0'},
    {'id' : 8, 'mood' : "üå¶", 'text' : "–°–æ–ª–Ω—Ü–µ –∏ –æ–±–ª–∞–∫–∞ —Å –∫–∞–ø–ª—è–º–∏", 'rec' : '0'},
    {'id' : 9, 'mood' : "üåß", 'text' : "–û–ø—è—Ç—å –¥–æ–∂–¥—å. –ù—É–∂–µ–Ω –∑–æ–Ω—Ç", 'rec' : '0'},
    {'id' : 10, 'mood' : "üåß", 'text' : "–û–ø—è—Ç—å –¥–æ–∂–¥—å. –ù—É–∂–µ–Ω –∑–æ–Ω—Ç", 'rec' : '0'},
    {'id' : 11, 'mood' : "üå®", 'text' : "–°–Ω–µ–≥–æ–ø–∞–¥", 'rec' : '1'},
    {'id' : 12, 'mood' : "üå®", 'text' : "–°–Ω–µ–≥–æ–ø–∞–¥", 'rec' : '1'},
    {'id' : 13, 'mood' : "‚õÖÔ∏è", 'text' : "–û–±–ª–∞—á–Ω–æ —Å –ø—Ä–æ—è—Å–Ω–µ–Ω–∏—è–º–∏", 'rec' : '1'},
    {'id' : 14, 'mood' : "‚òÄÔ∏è", 'text' : "–°–æ–ª–Ω—Ü–µ –∑–æ–ª–æ—Ç–æ–µ.", 'rec' : '1'},
    {'id' : 15, 'mood' : "üå©", 'text' : "–ì—Ä–æ–∑–∞ –±–µ–∑ –¥–æ–∂–¥—è", 'rec' : '0'},
    {'id' : 16, 'mood' : "‚õà", 'text' : "–ì—Ä–æ–∑–∞ –∏ –¥–æ–∂–¥—å", 'rec' : '0'},
    {'id' : 17, 'mood' : "‚õà", 'text' : "–ì—Ä–æ–∑–∞ –∏ –¥–æ–∂–¥—å", 'rec' : '0'},
    {'id' : 18, 'mood' : "‚òÅÔ∏è", 'text' : "–û–±–ª–∞–∫–∞ –±–µ–ª–æ–≥—Ä–∏–≤—ã–µ –ª–æ—à–∞–¥–∫–∏. –ï—Å–ª–∏ –∫—Ä–∞—Ç–∫–æ, —Ç–æ –æ–±–ª–∞—á–Ω–æ", 'rec' : '1'},
]
mood = weather[0]

optionsneg = ['–Ø –±—ã –æ—Å—Ç–∞–ª—Å—è –¥–æ–º–∞',
              '–í–æ–∑–º–æ–∂–Ω—ã –æ—Å–∞–¥–∫–∏ –≤ –≤–∏–¥–µ —Ñ—Ä–∏–∫–∞–¥–µ–ª–µ–∫, –±–µ—Ä–µ–≥–∏—Ç–µ—Å—å!',
              '–ü—Ä–æ–≥—É–ª–∫–∞ –Ω–∞ –≤–∞—à–µ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ'
              ]

optionspos = ['–°–∞–º–æ–µ –≤—Ä–µ–º—è –ø–æ–¥—ã—à–∞—Ç—å –≤–æ–∑–¥—É—Ö–æ–º',
              '–ü—Ä–æ–≥—É–ª–∫–∞ –µ—â–µ –Ω–∏–∫–æ–º—É –Ω–µ –≤—Ä–µ–¥–∏–ª–∞',
              '–ñ–∞–ª—å, —á—Ç–æ —è –≤—Å–µ–≥–æ –ª–∏—à—å –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –¢–∞–∫ –±—ã –ø—Ä–æ–≥—É–ª—è–ª—Å—è',
              '–°–∞–º–æ–µ –≤—Ä–µ–º—è –≤—ã–π—Ç–∏ –Ω–∞ —É–ª–∏—Ü—É'
              ]



for em in emojis:
    if em['mood'] == mood:
        mood_text = em['text']
        rec = em['rec']
        if int(rec) == 1:
            rec = random.choice(optionspos)
            break
        else:
            rec = random.choice(optionsneg)

temperature = n2w(weather[1][2:-2], lang = 'ru')
temperature_num = weather[1][2:-2]
speed_wind = n2w(weather[2][3:-4], lang= 'ru')
speed_wind_num = weather[2][3:-4]

